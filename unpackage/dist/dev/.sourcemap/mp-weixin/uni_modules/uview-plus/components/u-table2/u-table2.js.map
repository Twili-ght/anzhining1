{"version":3,"file":"u-table2.js","sources":["uni_modules/uview-plus/components/u-table2/u-table2.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5qGM6Z2iL2FuemhpbmluZy9hYmMvdW5pX21vZHVsZXMvdXZpZXctcGx1cy9jb21wb25lbnRzL3UtdGFibGUyL3UtdGFibGUyLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"u-table2\" :class=\"{ 'u-table-border': border }\">\r\n        <scroll-view scroll-x scroll-y class=\"u-table2-content\"\r\n            :style=\"{ height: height ? addUnit(height) : 'auto' }\"\r\n            @scroll=\"onScroll\">\r\n            <!-- 表头 -->\r\n            <view v-if=\"showHeader\" class=\"u-table-header\"\r\n                :class=\"{ 'u-table-sticky': fixedHeader }\"\r\n                :style=\"{minWidth: scrollWidth}\">\r\n                <view class=\"u-table-row\">\r\n                    <view v-for=\"(col, colIndex) in columns\" :key=\"col.key\" class=\"u-table-cell\"\r\n                        :class=\"[col.headerAlign ? 'u-text-' + col.headerAlign : (col.align ? 'u-text-' + col.align : '') ,\r\n                            headerCellClassName ? headerCellClassName(col) : '',\r\n                            getFixedClass(col)\r\n                        ]\" :style=\"headerColStyle(col)\" @click=\"handleHeaderClick(col)\">\r\n                        <slot name=\"header\" :column=\"col\" :columnIndex=\"colIndex\" :level=\"1\">\r\n                        </slot>\r\n                        <text v-if=\"!$slots['header']\">{{ col.title }}</text>\r\n                        <template v-if=\"col.sortable\">\r\n                            <slot name=\"headerSort\" :sortStatus=\"getSortValue(col.key)\" :column=\"col\"\r\n                                :columnIndex=\"colIndex\" :level=\"1\">\r\n                            </slot>\r\n                            <view v-if=\"!$slots['headerSort']\">\r\n                                {{ getSortIcon(col.key) }}\r\n                            </view>\r\n                        </template>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- 表体 -->\r\n            <view class=\"u-table-body\" :style=\"{ minWidth: scrollWidth, maxHeight: maxHeight ? maxHeight + 'px' : 'none' }\">\r\n                <template v-if=\"data && data.length > 0\">\r\n                    <table-row \r\n                        v-for=\"(row, rowIndex) in sortedData\"\r\n                        :key=\"row[rowKey] || rowIndex\"\r\n                        :row=\"row\" \r\n                        :rowIndex=\"rowIndex\"\r\n                        :parent-row=\"null\"\r\n                        :columns=\"columns\"\r\n                        :tree-props=\"treeProps\"\r\n                        :row-key=\"rowKey\"\r\n                        :expanded-keys=\"expandedKeys\"\r\n                        :cell-style-inner=\"cellStyleInner\"\r\n                        :is-expanded=\"isExpanded\"\r\n                        :row-class-name=\"rowClassName\"\r\n                        :stripe=\"stripe\"\r\n                        :cell-class-name=\"cellClassName\"\r\n                        :get-fixed-class=\"getFixedClass\"\r\n                        :highlight-current-row=\"highlightCurrentRow\"\r\n                        :current-row=\"currentRow\"\r\n                        :handle-row-click=\"handleRowClick\"\r\n                        :toggle-expand=\"toggleExpand\"\r\n                        :level=\"1\"\r\n                        :rowHeight=\"rowHeight\"\r\n                        :hasTree=\"hasTree\"\r\n                        :selectedRows=\"selectedRows\"\r\n                        :expandWidth=\"expandWidth\"\r\n                        :computedMainCol=\"computedMainCol\"\r\n                        :span-method=\"spanMethod\"\r\n                        @toggle-select=\"toggleSelect\"\r\n                        @row-click=\"handleRowClick\"\r\n                        @toggle-expand=\"toggleExpand\"\r\n                    >\r\n                        <template v-slot:cellChild=\"scope\">\r\n                            <slot name=\"cell\" :row=\"scope.row\" :column=\"scope.column\" :prow=\"scope.prow\"\r\n                                :rowIndex=\"scope.rowIndex\" :columnIndex=\"scope.columnIndex\" :level=\"scope.level\">\r\n                            </slot>                      \r\n                        </template>\r\n                    </table-row>\r\n                </template>\r\n                <template v-else>\r\n                    <slot name=\"empty\">\r\n                    </slot>\r\n                    <view v-if=\"!$slots['empty']\" class=\"u-table-empty\">{{ emptyText }}</view>\r\n                </template>\r\n            </view>\r\n        </scroll-view>\r\n        \r\n        <!-- 固定列浮动视图 -->\r\n        <view v-if=\"showFixedColumnShadow\" class=\"u-table-fixed-shadow\" :style=\"{ height: tableHeight }\">\r\n            <!-- 表头 -->\r\n            <view v-if=\"showHeader\" class=\"u-table-header\" :class=\"{ 'u-table-sticky': fixedHeader }\" :style=\"{minWidth: scrollWidth}\">\r\n                <view class=\"u-table-row\" :style=\"{height: headerHeight}\">\r\n                    <view v-for=\"(col, colIndex) in visibleFixedLeftColumns\" :key=\"col.key\" class=\"u-table-cell\"\r\n                        :style=\"headerColStyle(col)\"\r\n                        :class=\"[col.align ? 'u-text-' + col.align : '',\r\n                            headerCellClassName ? headerCellClassName(col) : '',\r\n                            getFixedClass(col)\r\n                        ]\" @click=\"handleHeaderClick(col)\">\r\n                        <slot name=\"header\" :column=\"col\" :columnIndex=\"colIndex\" :level=\"1\">\r\n                        </slot>\r\n                        <text v-if=\"!$slots['header']\">{{ col.title }}</text>\r\n                        <template v-if=\"col.sortable\">\r\n                            <slot name=\"headerSort\" :sortStatus=\"getSortValue(col.key)\" :column=\"col\"\r\n                                :columnIndex=\"colIndex\" :level=\"1\">\r\n                            </slot>\r\n                            <view v-if=\"!$slots['headerSort']\">\r\n                                {{ getSortIcon(col.key) }}\r\n                            </view>\r\n                        </template>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- 表体 -->\r\n            <view class=\"u-table-body\" :style=\"{ minWidth: scrollWidth, maxHeight: maxHeight ? maxHeight + 'px' : 'none' }\">\r\n                <template v-if=\"data && data.length > 0\">\r\n                    <template v-for=\"(row, rowIndex) in sortedData\" :key=\"row[rowKey] || rowIndex\">\r\n                        <!-- 子级渲染 (递归组件) -->\r\n                        <table-row \r\n                            :row=\"row\" \r\n                            :rowIndex=\"rowIndex\"\r\n                            :parent-row=\"null\"\r\n                            :columns=\"visibleFixedLeftColumns\"\r\n                            :tree-props=\"treeProps\"\r\n                            :row-key=\"rowKey\"\r\n                            :expanded-keys=\"expandedKeys\"\r\n                            :cell-style-inner=\"cellStyleInner\"\r\n                            :is-expanded=\"isExpanded\"\r\n                            :row-class-name=\"rowClassName\"\r\n                            :stripe=\"stripe\"\r\n                            :cell-class-name=\"cellClassName\"\r\n                            :get-fixed-class=\"getFixedClass\"\r\n                            :highlight-current-row=\"highlightCurrentRow\"\r\n                            :current-row=\"currentRow\"\r\n                            :handle-row-click=\"handleRowClick\"\r\n                            :toggle-expand=\"toggleExpand\"\r\n                            :level=\"1\"\r\n                            :rowHeight=\"rowHeight\"\r\n                            :hasTree=\"hasTree\"\r\n                            :selectedRows=\"selectedRows\"\r\n                            :expandWidth=\"expandWidth\"\r\n                            :computedMainCol=\"computedMainCol\"\r\n                            :span-method=\"spanMethod\"\r\n                            @toggle-select=\"toggleSelect\"\r\n                            @row-click=\"handleRowClick\"\r\n                            @toggle-expand=\"toggleExpand\"\r\n                        >\r\n                            <template v-slot:cellChild=\"scope\">\r\n                                <slot name=\"cell\" :row=\"scope.row\" :column=\"scope.column\" :prow=\"scope.prow\"\r\n                                    :rowIndex=\"scope.rowIndex\" :columnIndex=\"scope.columnIndex\" :level=\"scope.level\">\r\n                                </slot>                      \r\n                            </template>\r\n                        </table-row>\r\n                    </template>\r\n                </template>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\nimport { addUnit, sleep } from '../../libs/function/index';\r\nimport tableRow from './tableRow.vue'; // 引入递归组件\r\n\r\nexport default {\r\n    name: 'u-table2',\r\n    components: {\r\n        tableRow // 注册递归组件\r\n    },\r\n    props: {\r\n        data: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => {\r\n                return []\r\n            }\r\n        },\r\n        columns: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => {\r\n                return []\r\n            },\r\n            validator: cols =>\r\n                cols.every(col =>\r\n                    ['default', 'selection', 'expand'].includes(col.type || 'default')\r\n                )\r\n        },\r\n        stripe: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        border: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        height: {\r\n            type: [String, Number],\r\n            default: null\r\n        },\r\n        maxHeight: {\r\n            type: [String, Number],\r\n            default: null\r\n        },\r\n        showHeader: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        highlightCurrentRow: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        rowKey: {\r\n            type: String,\r\n            default: 'id'\r\n        },\r\n        currentRowKey: {\r\n            type: [String, Number],\r\n            default: null\r\n        },\r\n        rowStyle: {\r\n            type: Object,\r\n            default: () => ({})\r\n        },\r\n        cellClassName: {\r\n            type: Function,\r\n            default: null\r\n        },\r\n\t\tcellStyle: {\r\n\t\t    type: Function,\r\n\t\t    default: null\r\n\t\t},\r\n        headerCellClassName: {\r\n            type: Function,\r\n            default: null\r\n        },\r\n        rowClassName: {\r\n            type: Function,\r\n            default: null\r\n        },\r\n        context: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n        showOverflowTooltip: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        lazy: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        load: {\r\n            type: Function,\r\n            default: null\r\n        },\r\n        treeProps: {\r\n            type: Object,\r\n            default: () => ({\r\n                children: 'children',\r\n                hasChildren: 'hasChildren'\r\n            })\r\n        },\r\n        defaultExpandAll: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        expandRowKeys: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        sortOrders: {\r\n            type: Array,\r\n            default: () => ['ascending', 'descending']\r\n        },\r\n        sortable: {\r\n            type: [Boolean, String],\r\n            default: false\r\n        },\r\n        multiSort: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        sortBy: {\r\n            type: String,\r\n            default: null\r\n        },\r\n        sortMethod: {\r\n            type: Function,\r\n            default: null\r\n        },\r\n        filters: {\r\n            type: Object,\r\n            default: () => ({})\r\n        },\r\n        fixedHeader: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        emptyText: {\r\n            type: String,\r\n            default: '暂无数据'\r\n        },\r\n        // 添加mainCol属性，用于指定树形结构展开控制图标所在的列\r\n        mainCol: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        expandWidth: {\r\n            type: String,\r\n            default: '25px'\r\n        },\r\n        rowHeight: {\r\n            type: String,\r\n            default: '36px'\r\n        },\r\n        // 添加spanMethod属性，用于合并单元格\r\n        spanMethod: {\r\n            type: Function,\r\n            default: null\r\n        }\r\n    },\r\n    emits: [\r\n        'select', 'select-all', 'selection-change',\r\n        'cell-click', 'row-click', 'row-dblclick',\r\n        'header-click', 'sort-change', 'filter-change',\r\n        'current-change', 'expand-change'\r\n    ],\r\n    data() {\r\n        return {\r\n            scrollWidth: 'auto',\r\n            // 将setup中的ref转换为data属性\r\n            expandedKeys: [...this.expandRowKeys],\r\n            selectedRows: [],\r\n            sortConditions: [],\r\n            currentRow: null,\r\n            scrollLeft: 0, // 新增滚动位置数据\r\n            showFixedColumnShadow: false, // 是否显示固定列阴影\r\n            fixedLeftColumns: [], // 左侧固定列\r\n            tableHeight: 'auto', // 表格高度\r\n            headerHeight: 'auto', // 新增表头高度属性\r\n            hasTree: false // 新增属性，用于判断是否存在树形结构\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getComponentWidth()\r\n        // 处理currentRowKey初始化\r\n        if (this.currentRowKey !== null) {\r\n            const found = this.data.find(item => item[this.rowKey] === this.currentRowKey);\r\n            if (found) {\r\n                this.currentRow = found;\r\n            }\r\n        }\r\n        // 获取固定列\r\n        this.fixedLeftColumns = this.columns.filter(col => col.fixed === 'left');\r\n    },\r\n    computed: {\r\n        // 将setup中的computed转换为computed属性\r\n        filteredData() {\r\n            return this.data.filter(row => {\r\n                return Object.keys(this.filters).every(key => {\r\n                    const filter = this.filters[key];\r\n                    if (!filter) return true;\r\n                    return row[key]?.toString().includes(filter.toString());\r\n                });\r\n            });\r\n        },\r\n        sortedData() {\r\n            if (!this.sortConditions.length) return this.filteredData;\r\n\r\n            const data = [...this.filteredData];\r\n\r\n            return data.sort((a, b) => {\r\n                for (const condition of this.sortConditions) {\r\n                    const { field, order } = condition;\r\n                    let valA = a[field];\r\n                    let valB = b[field];\r\n\r\n                    if (this.sortMethod) {\r\n                        const result = this.sortMethod(a, b, field);\r\n                        if (result !== 0) return result * (order === 'ascending' ? 1 : -1);\r\n                    }\r\n\r\n                    if (valA < valB) return order === 'ascending' ? -1 : 1;\r\n                    if (valA > valB) return order === 'ascending' ? 1 : -1;\r\n                }\r\n                return 0;\r\n            });\r\n        },\r\n        // 计算当前应该显示的固定左侧列\r\n        visibleFixedLeftColumns() {\r\n            if (this.scrollLeft <= 0) {\r\n                return [];\r\n            }\r\n            \r\n            let totalWidth = 0;\r\n            let fixedWidth = 0;\r\n            const visibleColumns = [];\r\n            \r\n            // 遍历所有列，不仅仅是固定列\r\n            for (let i = 0; i < this.columns.length; i++) {\r\n                const col = this.columns[i];\r\n                const colWidth = col.width ? parseInt(col.width) : 100; // 默认宽度100px\r\n                \r\n                // 如果是固定列且滚动位置足够显示该列\r\n                if (col.fixed === 'left' && this.scrollLeft > totalWidth - fixedWidth) {\r\n                    visibleColumns.push(col);\r\n                    fixedWidth += colWidth;\r\n                }\r\n                \r\n                totalWidth += colWidth;\r\n            }\r\n            \r\n            return visibleColumns;\r\n        },\r\n        // 获取mainCol的值，如果未设置则默认为第一列的key\r\n        computedMainCol() {\r\n            if (this.mainCol) {\r\n                return this.mainCol;\r\n            }\r\n            // 修改为排除有type值的列\r\n            const validColumns = this.columns.filter(col => !col.type);\r\n            let mainCol = validColumns && validColumns.length > 0 ? validColumns[0].key : '';\r\n            // console.log('mainCol', mainCol)\r\n            return mainCol;\r\n        }\r\n    },\r\n    watch: {\r\n        // 将setup中的watch转换为watch属性\r\n        expandRowKeys: {\r\n            handler(newVal) {\r\n                this.expandedKeys = [...newVal];\r\n            },\r\n            immediate: true\r\n        },\r\n        currentRowKey: {\r\n            handler(newVal) {\r\n                const found = this.data.find(item => item[this.rowKey] === newVal);\r\n                if (found) {\r\n                    this.currentRow = found;\r\n                }\r\n            },\r\n            immediate: true\r\n        },\r\n        columns: {\r\n            handler() {\r\n                // this.fixedLeftColumns = this.columns.filter(col => col.fixed === 'left');\r\n            },\r\n            deep: true,\r\n            immediate: false\r\n        }\r\n    },\r\n    methods: {\r\n        addUnit,\r\n        onScroll(e) {\r\n            this.scrollLeft = e.detail.scrollLeft;\r\n            // 获取所有左侧固定列\r\n            this.fixedLeftColumns = this.columns.filter(col => col.fixed === 'left');\r\n            // 计算是否需要显示固定列阴影\r\n            if (this.fixedLeftColumns.length > 0) {\r\n                this.showFixedColumnShadow = this.scrollLeft > 0;\r\n            }\r\n        },\r\n        \r\n        getFixedShadowStyle(col, index) {\r\n            let style = {\r\n                width: col.width ? addUnit(col.width) : 'auto',\r\n            };\r\n            \r\n            if (col?.style) {\r\n                style = {...style, ...col?.style};\r\n            }\r\n            \r\n            return style;\r\n        },\r\n        \r\n        getFixedClass(col) {\r\n            return ''; // 不再使用原来的固定列样式类\r\n        },\r\n        \r\n        headerColStyle(col) {\r\n            let style = {\r\n                width: col.width ? addUnit(col.width) : 'auto',\r\n                flex: col.width ? 'none' : 1\r\n            };\r\n            if (col?.style) {\r\n                style = {...style, ...col?.style};\r\n            }\r\n            return style;\r\n        },\r\n        \r\n\t\tsetCellStyle(e) {\r\n\t\t\tthis.cellStyle = e\r\n\t\t},\r\n\t\tcellStyleInner(scope) {\r\n\t\t\tlet style = {\r\n\t\t\t\twidth: scope.column?.width ? addUnit(scope.column.width) : 'auto',\r\n\t\t\t\tflex: scope.column?.width ? 'none' : 1\r\n\t\t\t};\r\n            // 只有展开列设置padding\r\n            if (scope.column.key == this.computedMainCol) {\r\n                style.paddingLeft = (16 * (scope.level -1 )) + 2 + 'px'\r\n            }\r\n\t\t\tif (this.cellStyle != null) {\r\n\t\t\t\tlet styleCalc = this.cellStyle(scope)\r\n\t\t\t\tif (styleCalc != null) {\r\n\t\t\t\t\tstyle = {...style, ...styleCalc}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn style;\r\n\t\t},\r\n        // 获取组件的宽度\r\n\t\tasync getComponentWidth() {\r\n\t\t\t// 延时一定时间，以获取dom尺寸\r\n\t\t\tawait sleep(30)\r\n\t\t\tthis.$uGetRect('.u-table-row').then(size => {\r\n\t\t\t\tthis.scrollWidth = size.width + 'px'\r\n\t\t\t})\r\n            \r\n            // 获取表头高度并设置\r\n            this.$uGetRect('.u-table-header').then(size => {\r\n                if (size.height) {\r\n                    this.headerHeight = size.height + 'px';\r\n                }\r\n            })\r\n            \r\n            // 遍历数据列表第一层判断是否存在树形结构\r\n            this.hasTree = this.sortedData.some(item => {\r\n                return item[this.treeProps.children] && item[this.treeProps.children].length > 0;\r\n            });\r\n\t\t},\r\n        // 将setup中的函数转换为methods\r\n        handleRowClick(row) {\r\n            if (this.highlightCurrentRow) {\r\n                const oldRow = this.currentRow;\r\n                this.currentRow = row;\r\n                this.$emit('current-change', row, oldRow);\r\n            }\r\n            this.$emit('row-click', row);\r\n        },\r\n        handleHeaderClick(column) {\r\n            if (!column.sortable) return;\r\n\r\n            const index = this.sortConditions.findIndex(c => c.field === column.key);\r\n            let newOrder = 'ascending';\r\n\r\n            if (index >= 0) {\r\n                if (this.sortConditions[index].order === 'ascending') {\r\n                    newOrder = 'descending';\r\n                } else {\r\n                    this.sortConditions.splice(index, 1);\r\n                    this.$emit('sort-change', this.sortConditions);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!this.multiSort) {\r\n                this.sortConditions = [{ field: column.key, order: newOrder }];\r\n            } else {\r\n                if (index >= 0) {\r\n                    this.sortConditions[index].order = newOrder;\r\n                } else {\r\n                    this.sortConditions.push({ field: column.key, order: newOrder });\r\n                }\r\n            }\r\n\r\n            this.$emit('sort-change', this.sortConditions);\r\n        },\r\n        getSortIcon(field) {\r\n            const cond = this.sortConditions.find(c => c.field === field);\r\n            if (!cond) return '';\r\n            return cond.order === 'ascending' ? '↑' : '↓';\r\n        },\r\n        getSortValue(field) {\r\n            const cond = this.sortConditions.find(c => c.field === field);\r\n            if (!cond) return '';\r\n            return cond.order === 'ascending';\r\n        },\r\n        toggleSelect(row) {\r\n            const index = this.selectedRows.findIndex(r => r[this.rowKey] === row[this.rowKey]);\r\n            if (index >= 0) {\r\n                // 取消选中当前行及其所有子节点\r\n                this.selectedRows.splice(index, 1);\r\n                // 递归取消所有子节点\r\n                this.unselectChildren(row);\r\n            } else {\r\n                // 选中当前行及其所有子节点\r\n                this.selectedRows.push(row);\r\n                // 递归选中所有子节点\r\n                this.selectChildren(row);\r\n            }\r\n            console.log(this.selectedRows)\r\n            this.$emit('selection-change', this.selectedRows);\r\n            this.$emit('select', row);\r\n        },\r\n        toggleExpand(row) {\r\n            // console.log(row)\r\n            const key = row[this.rowKey];\r\n            const index = this.expandedKeys.indexOf(key);\r\n            if (index === -1) {\r\n                this.expandedKeys.push(key);\r\n            } else {\r\n                this.expandedKeys.splice(index, 1);\r\n            }\r\n            this.$emit('expand-change', this.expandedKeys);\r\n        },\r\n        isExpanded(row) {\r\n            if (!row) {\r\n                return false;\r\n            }\r\n            return this.expandedKeys.includes(row[this.rowKey]);\r\n        },\r\n        // 新增方法：递归选中所有子节点\r\n        selectChildren(row) {\r\n            const children = row[this.treeProps.children];\r\n            if (children && children.length > 0) {\r\n                children.forEach(child => {\r\n                    // 检查是否已选中，避免重复添加\r\n                    const childIndex = this.selectedRows.findIndex(r => r[this.rowKey] === child[this.rowKey]);\r\n                    if (childIndex === -1) {\r\n                        this.selectedRows.push(child);\r\n                    }\r\n                    // 递归处理子节点的子节点\r\n                    this.selectChildren(child);\r\n                });\r\n            }\r\n        },\r\n        // 新增方法：递归取消选中所有子节点\r\n        unselectChildren(row) {\r\n            const children = row[this.treeProps.children];\r\n            if (children && children.length > 0) {\r\n                children.forEach(child => {\r\n                    const childIndex = this.selectedRows.findIndex(r => r[this.rowKey] === child[this.rowKey]);\r\n                    if (childIndex >= 0) {\r\n                        this.selectedRows.splice(childIndex, 1);\r\n                    }\r\n                    // 递归处理子节点的子节点\r\n                    this.unselectChildren(child);\r\n                });\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.u-table2 {\r\n    width: auto;\r\n    overflow: auto;\r\n    white-space: nowrap;\r\n    position: relative;\r\n\r\n    .u-table-header {\r\n        min-width: 100% !important;\r\n        width: fit-content;\r\n        background-color: #f5f7fa;\r\n    }\r\n\r\n    .u-table-body {\r\n        min-width: 100% !important;\r\n        width: fit-content;\r\n        position: relative;\r\n    }\r\n\r\n    .u-table-sticky {\r\n        position: sticky;\r\n        top: 0;\r\n        z-index: 10;\r\n    }\r\n\r\n    .u-table-row {\r\n        display: flex;\r\n        flex-direction: row;\r\n        overflow: hidden;\r\n        position: relative;\r\n        // min-height: 40px;\r\n    }\r\n\r\n    // 添加border样式支持\r\n    &.u-table-border {\r\n        border-top: 1px solid #ebeef5;\r\n        border-left: 1px solid #ebeef5;\r\n        border-right: 1px solid #ebeef5;\r\n        .u-table-cell {\r\n            border-right: 1px solid #ebeef5;\r\n        }\r\n        \r\n        .u-table-cell:last-child {\r\n            border-right: none;\r\n        }\r\n    }\r\n\r\n    .u-table-cell {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        padding: 10px 1px;\r\n        font-size: 14px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        line-height: 1.1;\r\n        border-bottom: 1px solid #ebeef5;\r\n        &.u-text-left {\r\n            justify-content: flex-start;\r\n            text-align: left;\r\n        }\r\n        &.u-text-center {\r\n            justify-content: center;\r\n            text-align: center;\r\n        }\r\n        &.u-text-right {\r\n            justify-content: flex-end;\r\n            text-align: right;\r\n        }\r\n    }\r\n\r\n    .u-table-row-zebra {\r\n        background-color: #fafafa;\r\n    }\r\n\r\n    .u-table-row-highlight {\r\n        background-color: #f5f7fa;\r\n    }\r\n\r\n    .u-table-empty {\r\n        text-align: center;\r\n        padding: 20px;\r\n        color: #999;\r\n    }\r\n}\r\n\r\n// 固定列浮动视图\r\n.u-table-fixed-shadow {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: auto;\r\n    z-index: 20;\r\n    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.15);\r\n    overflow: hidden;\r\n    background-color: #ffffff;\r\n}\r\n\r\n// .u-table-fixed-row {\r\n//     display: flex;\r\n//     flex-direction: row;\r\n//     align-items: center;\r\n//     border-bottom: 1rpx solid #ebeef5;\r\n//     position: relative;\r\n// }\r\n\r\n// 为固定列也添加border样式支持\r\n.u-table-fixed-shadow .u-table-border {\r\n    .u-table-cell {\r\n        border-right: 1rpx solid #ebeef5;\r\n    }\r\n    \r\n    .u-table-cell:last-child {\r\n        border-right: none;\r\n    }\r\n}\r\n</style>","import Component from 'E:/桌面/anzhining/abc/uni_modules/uview-plus/components/u-table2/u-table2.vue'\nwx.createComponent(Component)"],"names":["addUnit","sleep","uni"],"mappings":"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"}